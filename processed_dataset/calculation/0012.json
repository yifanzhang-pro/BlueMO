{
    "source_file": "./raw_volume-zh/volume1/chapter3.tex",
    "problem_type": "calculation",
    "problem": "例3. 设 $\\left(a_1, a_2, \\cdots, a_n\\right)$ 是集合 $\\{1,2, \\cdots, n\\}$ 中 $n$ 个元素的一个排列, 记所有满足\n$$\nk \\mid 2\\left(a_1+a_2+\\cdots+a_k\\right), k=1,2, \\cdots, n\n$$\n的排列 $\\left(a_1, a_2, \\cdots, a_n\\right)$ 的集合为 $A_n$. 求 $\\left|A_n\\right|$ 的值.",
    "solution": "分析:显然 $1\\left|2 a_1, n\\right| 2\\left(a_1+a_2+\\cdots+a_n\\right)$, 我们需要研究当 $2 \\leqslant k \\leqslant n-1$ 时, $k \\mid 2\\left(a_1+a_2+\\cdots+a_k\\right)$ 应满足的条件.\n对于一般的 $k$, 我们没有更好的办法来表示 $a_1+a_2+\\cdots+a_k$, 但当 $k=n-1$ 时, 显然有 $a_1+a_2+\\cdots+ a_{n-1}=1+2+\\cdots+n-a_n {=} \\frac{n(n+1)}{2}-a_n$, 于是 $n-1 \\mid 2\\left(a_1+a_2+\\cdots+a_{n-1}\\right)$ 等价于 $n-1 \\mid n(n+1)-2 a_n$, 问题转化为对 $a_n$ 的研究.\n解设 $F_n=\\left|A_n\\right|$. 容易算出 $F_1=1, F_2=2, F_3=6$.\n当 $n>3$ 时,对于任意 $\\left(a_1, a_2, \\cdots, a_n\\right) \\in A_n$, 有\n$$\n\\begin{aligned}\n& 2\\left(a_1+a_2+\\cdots+a_{n-1}\\right) \\\\\n= & n(n+1)-2 a_n \\equiv 2-2 a_n(\\bmod (n-1)) .\n\\end{aligned}\n$$\n由 $A_n$ 的定义, 必有\n$$\nn-1 \\mid 2-2 a_n \\text {. }\n$$\n故 $a_n=1$,或 $a_n=n$, 或 $a_n=\\frac{n+1}{2}$.\n(1) 若 $a_n=\\frac{n+1}{2}$, 则\n$$\n\\begin{aligned}\n2\\left(a_1+a_2+\\cdots+a_{n-2}\\right) & =n(n+1)-2 a_{n-1}-(n+1) \\\\\n& =n^2-1-2 a_{n-1} \\\\\n& \\equiv 3-2 a_{n-1}(\\bmod (n-2)) .\n\\end{aligned}\n$$\n从而有\n$$\nn-2 \\mid 3-2 a_{n-1} .\n$$\n解得 $a_{n-1}=\\frac{n+1}{2}$. 于是 $a_{n-1}=a_n$, 矛盾.\n(2) 若 $a_n=n$, 则 $\\left(a_1, a_2, \\cdots, a_{n-1}, n\\right)$ 与 $A_{n-1}$ 的元素 $\\left(a_1, a_2, \\cdots, a_{n-1}\\right)$ 形成一一对应关系.\n所以, 这样的排列共有 $F_{n-1}$ 种.\n(3) 若 $a_n=1$, 则 $\\left(a_1-1, a_2-1, \\cdots, a_{n-1}-1\\right)$ 是集合 $\\{1,2, \\cdots, n-1\\}$ 中 $n-1$ 个元素的一个排列.\n由\n$$\n\\begin{aligned}\n& 2\\left[\\left(a_1-1\\right)+\\left(a_2-1\\right)+\\cdots+\\left(a_k-1\\right)\\right] \\\\\n= & 2\\left(a_1+a_2+\\cdots+a_k\\right)-2 k \\\\\n\\equiv & 0(\\bmod k) \\\\\n\\Leftrightarrow & \\left(a_1-1, a_2-1, \\cdots, a_{n-1}-1\\right) \\in A_{n-1}\n\\end{aligned}\n$$\n知 $\\left(a_1, a_2, \\cdots, a_{n-1}, 1\\right)$ 与 $A_{n-1}$ 的元素 $\\left(a_1-1, a_2-1, \\cdots, a_{n-1}-1\\right)$ 之间也形成一一对应关系.\n故这样的排列也有 $F_{n-1}$ 种.\n由(2)、(3), 可建立递推关系\n$$\nF_n=2 F_{n-1}, n>3 .\n$$\n由 $F_3=6$, 得 $F_n=3 \\cdot 2^{n-2}(n \\geqslant 3)$.\n综上, 当 $n=1$ 时, $F_1=1$; 当 $n=2$ 时, $F_2=2$; 当 $n \\geqslant 3$ 时, $F_n=3 \\cdot 2^{n-2}$.\n说明这里, 我们通过建立 $F_n$ 与 $F_{n-1}$ 之间的联系 (递推关系) 来达到求解的目的。",
    "remark": "",
    "figures": []
}