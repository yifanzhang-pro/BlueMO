{
    "source_file": "./raw_volume-zh/volume1/exercise3.tex",
    "problem_type": "calculation",
    "problem": "问题17 $n, m$ 为正整数, $A=\\{1,2, \\cdots, n\\}, B_n^m=\\{\\left(a_1, a_2, \\cdots, a_m\\right) \\mid a_i \\in A, i=1,2, \\cdots, m\\}$ 满足:\n(1) $\\left|a_i-a_{i+1}\\right| \\neq n-1, i=1,2, \\cdots, m-1$;\n(2) $a_1, a_2, \\cdots, a_m(m \\geqslant 3)$ 中至少有三个不同.\n求 $B_n^m$ 和 $B_6^3$ 的元素的个数.",
    "solution": "由题意, 若 $B_n^m$ 非空, 则 $n, m \\geqslant 3$. 计算仅满足条件 (1) 的 $\\left(a_1, a_2, \\cdots\\right.$, $\\left.a_m\\right)$ 的个数, 这时 1 与 $n$ 不相邻.\n记这样的 $\\left(a_1, a_2, \\cdots, a_m\\right)$ 有 $S_m$ 个, 其中 $x_m$ 个以 1 开头, $y_m$ 个以 $2, \\cdots, n-1$ 开头, $z_m$ 个以 $n$ 开头, 则 $S_m=x_m+y_m+z_m$, 那么有递推式 $x_{m+1}=x_m+y_m, y_{m+1}=(n-2)\\left(x_m+y_m+z_m\\right), z_{m+1}=y_m+z_m$. 以上三式相加得 $S_{m+1}=(n-1) S_m+(n-2) S_{m-1}$. (*)\n又易知 $S_1=n, S_2=n^2-2$, 而 (*) 的特征方程是 $t^2-(n-1) t-(n-2)=0$, 其特征根为 $t_{1,2}=\\frac{n-1 \\pm \\sqrt{n^2+2 n-7}}{2}$, 故 $S_m=A \\cdot\\left(\\frac{n-1+\\sqrt{n^2+2 n-7}}{2}\\right)^m+ B \\cdot\\left(\\frac{n-1-\\sqrt{n^2+2 n-7}}{2}\\right)^m$, 其中 $A 、 B$ 由 $S_1=A \\cdot\\left(\\frac{n-1+\\sqrt{n^2+2 n-7}}{2}\\right)+ B \\cdot\\left(\\frac{n-1-\\sqrt{n^2+2 n-7}}{2}\\right)=n$ 及 $S_2=A \\cdot\\left(\\frac{n-1+\\sqrt{n^2+2 n-7}}{2}\\right)^2+B \\cdot$\n$$\n\\begin{aligned}\n& \\left(\\frac{n-1-\\sqrt{n^2+2 n-7}}{2}\\right)^2=n^2-2 \\text { 确定, 解得 } A=\\frac{1+\\frac{n+1}{\\sqrt{n^2+2 n-7}}}{2}, \\\\\n& B=\\frac{1-\\frac{n+1}{\\sqrt{n^2+2 n-7}}}{2} . \\\\\n& \\text { 故 } S_m=\\left(\\frac{1+\\frac{n+1}{\\sqrt{n^2+2 n-7}}}{2}\\right)\\left(\\frac{n-1+\\sqrt{n^2+2 n-7}}{2}\\right)^m+ \\\\\n& \\left(\\frac{1-\\frac{n+1}{\\sqrt{n^2+2 n-7}}}{2}\\right)\\left(\\frac{n-1-\\sqrt{n^2+2 n-7}}{2}\\right)^m .\n\\end{aligned}\n$$\n下面再减去满足 (1) 而不满足 (2) 的.\n若 $a_1, a_2, \\cdots, a_m$ 全相同, 即 $a_1= \\cdots=a_m=k \\in\\{1,2, \\cdots, n\\}$, 这样的 $\\left(a_1, a_2, \\cdots, a_m\\right)$ 有 $n$ 个 $(n \\geqslant 3)$; 若 $a_1$, $a_2, \\cdots, a_m$ 中恰含两个不同的数, 选出这两个数有 $\\mathrm{C}_n^2$ 种方法, 但不能选 $\\{1, n\\}$, 故有 $\\mathrm{C}_n^2-1$ 种选法, 这样的 $\\left(a_1, a_2, \\cdots, a_m\\right)$ 有 $\\left(\\mathrm{C}_n^2-1\\right)\\left(2^m-2\\right)$ 种.\n综上所述,\n$$\n\\begin{aligned}\n& \\left|B_n^m\\right|=S_m-n-\\left(\\mathrm{C}_n^2-1\\right)\\left(2^m-2\\right)=\\left(\\frac{1+\\frac{n+1}{\\sqrt{n^2+2 n-7}}}{2}\\right) \\\\\n& {\\left[\\frac{n-1+\\sqrt{n^2+2 n-7}}{2}\\right)^m+\\left(\\frac{1-\\frac{n+1}{\\sqrt{n^2+2 n-7}}}{2}\\right)\\left[\\left(\\frac{n-1-\\sqrt{n^2+2 n-7}}{2}\\right)^m-\\right.} \\\\\n& n-\\left(\\mathrm{C}_n^2-1\\right)\\left(2^m-2\\right)(n, m \\geqslant 3) .\n\\end{aligned}\n$$\n特别地, 当 $n=6, m=3$ 时, $S_3=5 S_2+4 S_1=5 \\times 34+4 \\times 6=194$, 所以 $\\left|B_6^3\\right|=194-6-\\left(C_6^2-1\\right)\\left(2^3-2\\right)=104$.",
    "remark": "",
    "figures": []
}