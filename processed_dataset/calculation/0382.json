{
    "source_file": "./raw_volume-zh/volume14/chapter13.tex",
    "problem_type": "calculation",
    "problem": "例5. 一种密码锁的密码设置是在正 $n$ 边形 $A_1 A_2 \\cdots A_n$ 的每个顶点处赋值 0 和 1 两个数中的一个, 同时在每个顶点处染红、蓝两种颜色之一, 使得任意相邻的两个顶点的数字或颜色中至少有一个相同.\n问: 该种密码锁共有多少种不同的密码设置方案?",
    "solution": "解:设满足条件的密码设置方案共 $a_n$ 种, 其中, 顶点 $A_1, A_n$ 赋值与染色全同的方案有 $b_n$ 种, 其全体构成集合 $B_n ; A_1, A_n$ 赋值与染色恰有一项相同的方案有 $c_n$ 种, 其全体构成集合 $C_n$, 则\n$$\na_n=b_n+c_n . \\label{eq1}\n$$\n此外, 若不考虑相邻顶点 $A_1, A_n$ 间的赋值与染色是否兼容, 首先设置 $A_1$ 位置, 有 4 种方式, 再依次设置 $A_2, \\cdots, A_n$, 各有 3 种方式, 根据乘法原理, 共 $4 \\times 3^{n-1}$ 种方式, 因此, 若将 $A_1, A_n$ 赋值与染色完全不同, 但其余任意两个相邻顶点赋值与染色至少有一项相同的设置方式数记为 $d_n$, 则\n$$\na_n+d_n=4 \\times 3^{n-1} . \\label{eq2}\n$$\n对每种密码设置方案, 考虑顶点 $A_1, A_{n-1}$ 的赋值与染色情况.\n(1)若赋值与染色情况全同, 这样的情况数为 $b_{n-1}$, 每种情况恰可对应 $B_n$ 中的一个元素及 $C_n$ 中的两个元素 (例如, 若 $A_1, A_{n-1}$ 均为 \"0 红\", 则 $A_n$ 可为\" 0 红\"、\" 0 蓝\"或\" 1 红\", 前者对应 $B_n$ 中的方案, 后两者对应 $C_n$ 中的方案).\n(2)若赋值与染色恰有一项相同, 这样的情况数为 $c_{n-1}$, 每种情况恰可对应 $B_n$ 中的一个元素及 $C_n$ 中的一个元素 (例如, 若 $A_1$ 为 \"0 红\", $A_{n-1}$ 为 \"1 红\", 则 $A_n$ 可为\" 0 红\"、\" 1 红\", 前者对应 $B_n$ 中的方案, 后者对应 $C_n$ 中的方案).\n(3)若赋值与染色均不同, 这样的情况数为 $d_{n-1}$, 每种情况恰可对应 $C_n$\n中两个元素 (例如, 若 $A_1$ 为\" 0 红\", $A_{n-1}$ 为\" 1 蓝\", 则 $A_n$ 可为\" 0 蓝\"、\" 1 红\").\n由此,可建立递推关系\n$$\n\\begin{gathered}\nb_n=b_{n-1}+c_{n-1} ; \\label{eq3} \\\\\nc_n=2 b_{n-1}+c_{n-1}+2 d_{n-1} . \\label{eq4}\n\\end{gathered}\n$$\n由 式\\ref{eq1} 和 \\ref{eq3} 知 $b_n=a_{n-1}, c_n=a_n-a_{n-1}$, 结合 式\\ref{eq2} 与 \\ref{eq4} 可整理得 $a_n=a_{n-2}+ 8 \\times 3^{n-2}$, 又枚举得 $a_2=12, a_3=28$, 所以\n$$\na_n=\\left\\{\\begin{array}{l}\n3^n+1, n=3,5,7, \\cdots \\\\\n3^n+3, n=4,6,8, \\cdots .\n\\end{array}\\right.\n$$",
    "remark": "注:本题为 2010 年全国高中数学联赛加试最后一题, 标准解法是直接计数, 其中涉及组合式的化简.\n上述解法为递推方法, 虽不算很简洁, 但体现了递推的思维特点: 为了计算 $a_n$, 可根据解题的实际需要引人一系列辅助量 $b_n$, $c_n, d_n$, 通过计数原理清楚地列出它们之间的等量关系 (如果是 $k$ 个辅助量, 等量关系通常应列出 $k+1$ 个), 最后消去辅助量便可得到 $\\left\\{a_n\\right\\}$ 的递推关系.\n下面的一些例子说明递推思想的运用不纯然得借助于递推式,而是可以有灵活多样的形式.",
    "figures": []
}