{
    "source_file": "./raw_volume-zh/volume11/chapter13.tex",
    "problem_type": "calculation",
    "problem": "例4. 设 $a_1 a_2 a_3 a_4 a_5$ 是 $1,2,3,4,5$ 的排列, 满足: 当 $i=1,2,3,4$ 时, $a_1 a_2 \\cdots a_i$ 都不是 $1,2, \\cdots, i$ 的排列, 求这种排列的个数.",
    "solution": "解法二设 $1,2,3,4,5$ 的所有排列组成的集合为 $S$, 令\n$$\n\\begin{aligned}\n& A_i=\\left\\{\\left(a_1, a_2, a_3, a_4, a_5\\right) \\mid\\left(a_1, a_2, a_3, a_4, a_5\\right) \\in S,\\right. \\\\\n& \\text { 且 } \\left.\\left(a_1, a_2, \\cdots, a_i\\right) \\text { 是 }(1,2, \\cdots, i) \\text { 的排列 }\\right\\}(1 \\leqslant i \\leqslant 4)\n\\end{aligned}\n$$\n于是所求排列个数为 $\\left|\\complement_S A_1 \\cap \\complement_S A_2 \\cap \\complement_S A_3 \\cap \\complement_S A_4\\right|$, 易知\n$$\n\\begin{aligned}\n& |S|=5 !,\\left|A_1\\right|=4 !,\\left|A_2\\right|=2 ! \\cdot 3 !,\\left|A_3\\right|=3 ! \\cdot 2 !, \\\\\n& \\left|A_4\\right|=4 !,\\left|A_1 \\cap A_2\\right|=3 !,\\left|A_1 \\cap A_3\\right|=2 ! 2 !,\\left|A_1 \\cap A_4\\right|=3 !, \\\\\n& \\left|A_2 \\cap A_3\\right|=2 ! \\cdot 2 !,\\left|A_2 \\cap A_4\\right|=2 ! \\cdot 2 !,\\left|A_3 \\cap A_4\\right|=3 !, \\\\\n& \\left|A_1 \\cap A_2 \\cap A_3\\right|=2 !,\\left|A_1 \\cap A_2 \\cap A_4\\right|=2 !,\\left|A_1 \\cap A_3 \\cap A_4\\right|=2 !, \\\\\n& \\left|A_2 \\cap A_3 \\cap A_4\\right|=2 !,\\left|A_1 \\cap A_2 \\cap A_3 \\cap A_4\\right|==1 .\n\\end{aligned}\n$$\n故由容斥原理可得符合条件的排列个数为\n$$\n\\begin{aligned}\n& \\left|\\complement_S A_1 \\cap \\complement_S A_2 \\cap \\complement_S A_3 \\cap \\complement_S A_4\\right| \\\\\n= & |S|-\\sum_{i=1}^4\\left|A_i\\right|+\\sum_{1 \\leqslant i<j \\leqslant 4}\\left|A_i \\cap A_j\\right|-\\sum_{1 \\leqslant i<j<k \\leqslant 4}\\left|A_i \\cap A_j \\cap A_k\\right|+ \\\\\n& \\left|A_1 \\cap A_2 \\cap A_3 \\cap A_4\\right| \\\\\n= & 5 !-(4 !+2 ! \\cdot 3 !+3 ! \\cdot 2 !+4 !)+(3 !+2 ! \\cdot 2 !+3 !+2 ! \\cdot 2 !+2 ! \\cdot 2 ! \\\\\n& +3 !)-(2 !+2 !+2 !+2 !)+1 \\\\\n= & 120-72+30-8+1=71 \\text { (个). }\n\\end{aligned}\n$$",
    "remark": "注:$\\left|A_1 \\cap A_3\\right|=2 ! \\cdot 2$ ! 的理由是 $A_1 \\cap A_3$ 中只含形如 $1 \\times \\times 45$ 和 $1 \\times \\times 54$ 的排列, $\\left|A_1 \\cap A_4\\right|=3$ ! 的理由是 $A_1 \\cap A_4$ 中只含形如 $1 \\times \\times \\times 5$ 的排列,其他各式可类似得出.",
    "figures": []
}