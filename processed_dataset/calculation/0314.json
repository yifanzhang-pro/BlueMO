{
    "source_file": "./raw_volume-zh/volume13/chapter3.tex",
    "problem_type": "calculation",
    "problem": "例3. 设点 $P$ 从格点 $A(1,1)$ 出发, 沿格径以最短的路线运动到点 $B(m, n)\\left(m 、 n \\in \\mathbf{N}^*\\right)$, 即每次运动到另一格点时, 横坐标或纵坐标增加 1. 求点 $P$ 经过的所有格点中两坐标乘积之和 $S$ 的最大值.",
    "solution": "分析:解设 $P$ 经过的点依次为 $P_1=A(1,1), P_2, \\cdots, P_{m+n-1}=B(m, n), P_i$ 的坐标为 $\\left(x_i, y_i\\right)$, 则 $S=\\sum_{i=1}^{m+n-1} x_i y_i$. 要使 $S$ 最大, 由直观, 应使 $x_i 、 y_i$ 尽可能接近.\n但不能对任何 $i$, 要求 $x_i=y_i$ (否则沿对角线运动). 我们猜想, 如果 $\\left(x_1, y_1\\right),\\left(x_2, y_2\\right), \\cdots,\\left(x_{m+n-1}, y_{m+n-1}\\right)$ 使 $S$ 最大, 则对任何 $x_i<m, y_i<n$, 有 $\\left|x_i-y_i\\right| \\leqslant 1$.\n假设存在 $i$, 使 $\\left|x_i-y_i\\right|>1\\left(x_i<m, y_i<n\\right)$, 不妨设 $x_i-y_i>1$. 此时, 自然的想法是: 将 $x_i$ 减小 1 , 将 $y_i$ 增大 1 . 也就是将点 $P_i\\left(x_i, y_i\\right)$ 调整为 $P_i^{\\prime}\\left(x_i-\\right. \\left.1, y_i+1\\right)$, 其余点不变.\n但调整后的路线是否仍合乎条件? 显然, 要使调整后的路线仍合乎条件, 则 $P_i$ 应该满足: $P_{i-1} P_i$ 是横向边且 $P_i P_{i+1}$ 是纵向边.\n但 $P_i$ 末必满足这样的条件.\n此时, 观察路径, 发现一定有一个点 $P_t\\left(x_t, y_t\\right)$ 满足这样的条件, 即路径中存在这样连续三点 $P_{t-1}\\left(x_{t-1}, y_{t-1}\\right) 、 P_t\\left(x_t, y_t\\right)$ 、 $P_{t+1}\\left(x_{t+1}, y_{t+1}\\right)$, 使得 $P_{t-1} P_t$ 是横向边且 $P_t P_{t+1}$ 是纵向边, 且 $x_t-y_t>1$.\n实际上, 若 $P_{i-1} P_i$ 是纵向边, 则考察横坐标为 $x_i$ 且纵坐标最小的点.\n设其为 $P_t\\left(x_t, y_t\\right)$, 其中 $x_t=x_i, y_t<y_i$, 此时 $x_t-y_t=x_i-y_t>x_i-y_i>1$. 又因为 $x_t>1+y_t>1$, 所以到达 $P_t\\left(x_t, y_t\\right)$ 之前一定有横向边.\n于是由 $y_t$ 的最小性可知, $P_{t-1} P_t$ 是横向边, $P_t P_{t+1}$ 是纵向边.\n若 $P_{i-1} P_i$ 是横向边, 则考察纵坐标为 $y_i$ 且横坐标最大的点, 设为 $P_t\\left(x_t, y_t\\right)$, 其中 $x_t>x_i, y_t=y_i$. 此时 $x_t-y_t=x_t-y_i>x_i-y_i>1$. 又因为 $y_i<n$, 所以到达 $P_t\\left(x_t, y_t\\right)$ 之后一定还有纵向边.\n于是由 $x_t$ 的最大性可知, $P_t P_{t+1}$ 是纵向边, 且 $P_{t-1} P_t$ 是横向边.\n综上所述, 当路径中存在点 $P_i\\left(x_i, y_i\\right)$, 其中 $x_i<m, y_i<n$, 使 $x_i- y_i>1$ 时, 则一定存在这样的连续三点 $P_{t-1}\\left(x_{t-1}, y_{t-1}\\right) 、 P_t\\left(x_t, y_t\\right)$ 、 $P_{t+1}\\left(x_{t+1}, y_{t+1}\\right)$, 使得 $P_{t-1} P_t$ 是横向边且 $P_t P_{t+1}$ 是纵向边, 且 $x_t-y_t>1$. 于是, 用 $P_t^{\\prime}\\left(x_t-1, y_t+1\\right)$ 代替 $P_t\\left(x_t, y_t\\right)$, 得到的路径仍合乎要求.\n但 $\\left(x_t-1\\right) \\left(y_t+1\\right)=x_t y_t+x_t-y_t-1>x_t y_t$. 所以调整后 $S$ 的值增加, 矛盾.\n由上可知, 对路径中的任何一个点 $P_i\\left(x_i, y_i\\right)$, 若 $x_i \\neq y_i$, 则从 $P_i\\left(x_i, y_i\\right)$ 出发的边是唯一的,下一个点是将 $P_i\\left(x_i, y_i\\right)$ 的坐标中较小的一个增加 1 . 而 $x_i=y_i$ 时, 则从 $P_i\\left(x_i, y_i\\right)$ 出发的边有两种选择,下一个点是将 $P_i\\left(x_i, y_i\\right)$ 的横坐标或纵坐标增加 1 . 于是, 当 $m \\geqslant n$ 时, 其路径为:\n$$\n\\begin{aligned}\n& A(1,1) \\rightarrow P_2(2,1) \\text { 或 } P_2(1,2) \\rightarrow P_3(2,2) \\rightarrow P_4(2,3) \\text { 或 } P_4(3,2) \\rightarrow \\\\\n& P_5(3,3) \\rightarrow \\cdots \\rightarrow P_{2 n-1}(n, n) \\rightarrow P_{2 n}(n+1, n) \\rightarrow P_{2 n+1}(n+2, n) \\rightarrow \\cdots \\rightarrow \\\\\n& P_{m+n-1}(m, n) . \\\\\n& \\quad \\text { 此时, } \\quad S_{\\max }=\\sum_{i=1}^n i^2+\\sum_{i=1}^{n-1} i(i+1)+n \\sum_{i=1}^{m-n}(n+i) \\\\\n& =\\frac{1}{6} n\\left(3 m^2+n^2+3 m-1\\right) .\n\\end{aligned}\n$$\n当 $m<n$ 时, 同样可得 $S_{\\text {max }}=\\frac{1}{6} m\\left(3 n^2+m^2+3 n-1\\right)$.",
    "remark": "",
    "figures": []
}