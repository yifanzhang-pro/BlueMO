{
    "source_file": "./raw_volume-zh/volume11/chapter13.tex",
    "problem_type": "calculation",
    "problem": "例5. 对每个正整数 $n$, 求集合 $\\{1,2, \\cdots, n\\}$ 的排列 $\\left(a_1, a_2, \\cdots, a_n\\right)$ 的数目, 其中 $a_1, a_2, \\cdots, a_n$ 满足对于 $k=1,2, \\cdots, n$, 均有 $2\\left(a_1+a_2+\\cdots+a_k\\right)$ 可以被 $k$ 整除.",
    "solution": "解:对于每个正整数 $n$, 设 $x_n$ 为集合 $\\{1,2, \\cdots, n\\}$ 满足条件的排列的数目,并称这些排列是 \"好的\". 对 $n=1,2,3$, 易知每个排列都是好的, 因此, $x_1=1, x_2=2 !=2, x_3=3 !=6$.\n对于 $n>3$, 考虑 $\\{1,2, \\cdots, n\\}$ 的一个好的排列 $\\left(a_1, a_2, \\cdots a_n\\right)$, 由好的排列的定义知 $n-1$ 应是\n$$\n\\begin{aligned}\n2\\left(a_1+a_2+\\cdots+a_{n-1}\\right) & =2\\left(1+2+\\cdots+n-a_n\\right) \\\\\n& =n(n+1)-2 a_n=(n-1)(n+2)-\\left(2 a_n-2\\right)\n\\end{aligned}\n$$\n的因数, 因此, $2 a_n-2$ 可以被 $n-1$ 整除.\n而 $0 \\leqslant 2 a_n-2 \\leqslant 2(n-1)$, 于是, $2 a_n -2=0$ 或 $n-1$,或 $2(n-1)$. 即 $a_n=1$ 或 $\\frac{n+1}{2}$ 或 $n$.\n(1) 若 $a_n=\\frac{n+1}{2}$, 则 $n-2$ 应是\n$$\n\\begin{aligned}\n2\\left(a_1+a_2+\\cdots+a_{n-2}\\right) & =2\\left[(1+2+\\cdots+n)-a_n-a_{n-1}\\right] \\\\\n& =n(n+1)-(n+1)-2 a_{n-1} \\\\\n& =(n-2)(n+2)-\\left(2 a_{n-1}-3\\right)\n\\end{aligned}\n$$\n的因数,因此, $2 a_{n-1}-3$ 可以被 $n-2$ 整除, 而 $-1 \\leqslant 2 a_n-3 \\leqslant 2 n-3$,于是 $2 a_n-3=0$ 或 $n-2$ 或 $2 n-4$. 由于 $2 a_n-3$ 是奇数,故它不可能等于 0 或 $2 n-4$, 所以 $2 a_n-3=n-2$, 即 $a_{n-1}=\\frac{n+1}{2}=a_n$ 矛盾;\n(2) 若 $a_n=n$, 则 $\\left(a_1, a_2, \\cdots, a_{n-1}\\right)$ 是 $\\{1,2, \\cdots, n-1\\}$ 的好的排列, 这样的好的排列有 $x_{n-1}$ 个, 每一个这样的好排列的后面加上 $n$, 使得到 $\\{1$, $2, \\cdots, n\\}$ 的一个满足 $a_n=n$ 的好的排列 $\\left\\{a_1, a_2, \\cdots, a_n\\right\\}$, 这种对应是一一对应, 故满足 $a_n=n$ 的好的排列 $\\left\\{a_1, a_2, \\cdots, a_n\\right\\}$ 有 $x_{n-1}$ 个;\n(3) 若 $a_n=1$, 则 $\\left\\{a_1-1, a_2-1, \\cdots, a_{n-1}-1\\right\\}$ 是 $\\{1,2, \\cdots, n-1\\}$ 的好的排列, 这是因为对任意 $k \\leqslant n-1$, 有\n$$\n2\\left[\\left(a_1-1\\right)+\\left(a_2-1\\right)+\\cdots+\\left(a_k-1\\right)\\right]=2\\left(a_1+\\cdots+a_k\\right)-2 k\n$$\n被 $k$ 整除.\n因此, $\\{1,2, \\cdots, n-1\\}$ 的 $x_{n-1}$ 个好的排列中任意一个 $\\left(b_1, b_2, \\cdots\\right.$, $\\left.b_{n-1}\\right)$ 对应于 $\\{1,2, \\cdots, n\\}$ 的一个好排列 $\\left\\{b_1+1, b_2+1, \\cdots, b_{n-1}+1,1\\right\\}$, 这种对应是一一对应,故满足 $a_n=1$ 的好的排列有 $x_{n-1}$ 个.\n综上知 $x_n=2 x_{n-1}(n \\geqslant 4)$. 由 $x_3=6$, 得当 $n \\geqslant 4$ 时, $x_n=3 \\times 2^{n-2}$, 故满足题目条件的排列个数为 $x_n= \\begin{cases}n & (n=1,2), \\\\ 3 \\times 2^{n-2} & (n \\geqslant 3) .\\end{cases}$",
    "remark": "",
    "figures": []
}