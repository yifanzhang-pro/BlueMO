{
    "source_file": "./raw_volume-zh/volume11/chapter8.tex",
    "problem_type": "calculation",
    "problem": "例4. 一种密码锁的密码设置是在正 $n$ 边形 $A_1 A_2 \\cdots A_n$ 的每个顶点处赋值 0 和 1 两个数中的一个, 同时, 在每个顶点处染红、蓝两种颜色之一, 使得相邻两个顶点的数字和颜色至少有一个相同,问该种密码锁共有多少种不同的密码设置?",
    "solution": "解:设共有 $a_n$ 种不同的密码设置, 且不妨设一个点为正 1 边形,一条线段为正 2 边形,于是 $a_1=4, a_2=4 \\times 3=12$.\n依次将 $A_1, A_2, \\cdots, A_n$ 赋值和染色,使得 $A_{i+1}$ 与 $A_i$ 的数字与颜色中至少有一种相同, 于是 $A_1$ 有 4 种设置, 当 $A_i$ 取定后, $A_{i+1}$ 有 3 种设置 $(i=1$, $2, \\cdots, n-1)$, 故共有 $4 \\times 3^{n-1}$ 种设置.\n设其中 $A_n$ 与 $A_1$ 的数字与颜色都不相同的有 $b_n$ 种, $A_n$ 与 $A_1$ 的数字与颜色完全相同的有 $c_n$ 种, $A_n$ 与 $A_1$ 的数字与颜色恰有一种相同的有 $d_n$ 种, 则\n$$\n\\begin{gathered}\na_n+b_n=4 \\times 3^{n-1}, \\label{eq1}\\\\\nc_n=a_{n-1}, \\label{eq2}\\\\\na_n=c_n+d_n, \\label{eq4}\\\\\nb_n=b_{n-1}+d_{n-1},\\label{eq4}\n\\end{gathered}\n$$\n由式\\ref{eq1}得\n$$\na_{n-1}+b_{n-1}=4 \\times 3^{n-2} . \\label{eq5}\n$$\n式\\ref{eq1}-\\ref{eq5}得\n$$\n\\left(a_n-a_{n-1}\\right)+\\left(b_n-b_{n-1}\\right)=4 \\times\\left(3^{n-1}-3^{n-2}\\right)=8 \\times 3^{n-2} . \\label{eq6}\n$$\n而由式\\ref{eq4}, \\ref{eq3}, 式\\ref{eq2}有\n$$\nb_n-b_{n-1}=d_{n-1}=a_{n-1}-c_{n-1}=a_{n-1}-a_{n-2}, \\label{eq7}\n$$\n式\\ref{eq7}代入\\ref{eq6}得\n$$\n\\left(a_n-a_{n-1}\\right)+\\left(a_{n-1}-a_{n-2}\\right)=8 \\times 3^{n-2},\n$$\n所以\n$$\na_n-a_{n-2}=8 \\times 3^{n-2}(n \\geqslant 3) .\n$$\n于是, 当 $n=2 k$ 时,\n$$\n\\begin{aligned}\na_n=a_{2 k} & =a_2+\\left(a_4-a_2\\right)+\\left(a_6-a_4\\right)+\\cdots+\\left(a_{2 k}-a_{2 k-2}\\right) \\\\\n& =12+8 \\times 3^2+8 \\times 3^4+\\cdots+8 \\times 3^{2 k-2} \\\\\n& =12+\\frac{8 \\times 3^2 \\times\\left(3^{2 k-2}-1\\right)}{3^2-1}=12+3^2 \\times\\left(3^{2 k-2}-1\\right) \\\\\n& =3^{2 k}+3=3^n+2+(-1)^n .\n\\end{aligned}\n$$\n当 $n=2 k+1$ 时,\n$$\n\\begin{aligned}\na_n=a_{2 k+1} & =a_1+\\left(a_3-a_1\\right)+\\left(a_5-a_3\\right)+\\cdots+\\left(a_{2 k+1}-a_{2 k-1}\\right) \\\\\n& =4+8 \\times 3+8 \\times 3^3+\\cdots+8 \\times 3^{2 k-1} \\\\\n& =4+\\frac{8 \\times 3 \\times\\left(3^{2 k}-1\\right)}{3^2-1}=4+3 \\times\\left(3^{2 k}-1\\right) \\\\\n& =3^{2 k+1}+1=3^n+2+(-1)^n,\n\\end{aligned}\n$$\n故总有 $a_n=3^n+2+(-1)^n$.\n综上得不同的密码设置共有 $3^n+2+(-1)^n$ 种.",
    "remark": "",
    "figures": []
}