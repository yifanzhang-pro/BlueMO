{
    "source_file": "./raw_volume-zh/volume11/chapter15.tex",
    "problem_type": "proof",
    "problem": "例5. 设 $A$ 是有限集, 且 $|A| \\geqslant 2, A_1, A_2, \\cdots, A_n$ 是 $A$ 的子集且满足下述条件:\n(1) $\\left|A_1\\right|=\\left|A_2\\right|=\\cdots=\\left|A_n\\right|=k, k>\\frac{|A|}{2}$;\n(2) 对任意 $a, b \\in A$, 存在 3 个集合 $A_r, A_s, A_t(1 \\leqslant r<s<t \\leqslant n)$ 使得 $a, b \\in A_r \\cap A_s \\cap A_t$;\n(3) 对任意正整数 $i, j(1 \\leqslant i<j \\leqslant n)$, 有 $\\left|A_i \\cap A_j\\right| \\leqslant 3$.\n求: 当 $k$ 取最大值时,正整数 $n$ 的所有可能值.",
    "solution": "解:不妨设 $A=\\{1,2, \\cdots, m\\}$, 由条件 (1), (2) 知 $m \\geqslant k \\geqslant 2, n \\geqslant 3$ 且$m \\leqslant 2 k-1$.\n假设 $i$ 属于 $A_1, A_2, \\cdots, A_n$ 中 $r_i$ 个集合 $(i=1,2, \\cdots, m)$. 如果 $i \\in A_j$,那么将 $\\left(i, A_j\\right)$ 配成一对 $(1 \\leqslant i \\leqslant m, 1 \\leqslant j \\leqslant n)$, 并设这样的对子共有 $x$ 个.一方面对任意 $i \\in A$, 可形成 $r_i$ 个含 $i$ 的对子, 又 $i=1,2, \\cdots, m$, 所以 $x=$ $\\sum_{i=1}^m r_i$, 另一方面, 对任意 $A_j$, 可形成 $\\left|A_j\\right|=k$ 个含 $A_j$ 的对子, 所以 $x=\\sum_{j=1}^n\\left|A_j\\right|=n k$, 于是我们得到\n$$\n\\sum_{i=1}^m r_i=n k . \\label{eq1}\n$$\n如果 $i \\neq j$ 都属于 $A_t$, 那么将 $\\left(i, j ; A_t\\right)$ 组成第一类三元组 (前两个元不考虑顺序), 并设第一类三元组有 $y$ 个. 于是由已知条件 (2) 知; 对任意 $i \\neq j$,至少可形成三个含 $i, j$ 的第一类三元组, 而 $i, j(i \\neq j)$ 有 $\\mathrm{C}_m^2$ 种不同取法, 故 $y \\geqslant 3 \\mathrm{C}_m^2$. 另一方面由 $\\left|A_t\\right|=k$ 知: 对任意 $A_t$, 可形成 $\\mathrm{C}_k^2$ 个含 $A_t$ 的三元组, 而 $A_t$ 有 $n$ 种不同取法, 故 $y=n \\mathrm{C}_k^2$, 于是我们得到 $n \\mathrm{C}_k^2 \\geqslant 3 \\mathrm{C}_m^2$, 即\n$$\nn \\geqslant \\frac{3 m(m-1)}{k(k-1)} . \\label{eq2}\n$$\n如果 $t$ 是 $A_i$ 和 $A_j(i \\neq j)$ 的公共元, 那么将 $\\left(t ; A_i, A_j\\right)$ 组成第二类三元组 (后两个元不考虑顺序), 并设第二类三元组有 $Z$ 个. 因为 $t$ 属于 $A_1, A_2, \\cdots, A_n$中 $r_t$ 个集合, 故对任意 $t$, 可形成 $\\mathrm{C}_{r_t}^2$ 个含 $t$ 的第二类三元组, 而 $t=1,2, \\cdots, m$,所以 $Z=\\sum_{t=1}^m \\mathrm{C}_{r_i}^2$. 另一方面, 对任意 $A_i$ 和 $A_j(i \\neq j)$, 可形成 $\\left|A_i \\cap A_j\\right| \\leqslant 3$ 个含 $A_i$ 和 $A_j$ 的第二类三元组. 又 $1 \\leqslant i<j \\leqslant n$, 所以 $Z=\\sum_{1 \\leqslant i<j \\leqslant n}\\left|A_i \\cap A_j\\right| \\leqslant$ $3 \\mathrm{C}_n^2=\\frac{3}{2} n(n-1)$, 于是得\n$$\n\\frac{3}{2} n(n-1) \\geqslant \\sum_{t=1}^m \\mathrm{C}_{r_t}^2=\\frac{1}{2}\\left(\\sum_{t=1}^m r_t^2-\\sum_{t=1}^m r_t\\right)\n$$\n由柯西不等式及 式\\ref{eq1},我们得到\n$$\n\\begin{aligned}\n\\frac{3}{2} n(n-1) & \\geqslant \\frac{1}{2}\\left(\\frac{1}{m}\\left(\\sum_{t=1}^m r_t\\right)^2-\\sum_{t=1}^m r_t\\right) \\\\\n& =\\frac{1}{2 m}\\left(\\sum_{t=1}^m r_t\\right)\\left[\\left(\\sum_{t=1}^m r_t\\right)-m\\right] \\\\\n& =\\frac{1}{2 m}(n k)(n k-m) .\n\\end{aligned}\n$$\n整理得\n$$\n\\left(k^2-3 m\\right) n \\leqslant(k-3) m . \\label{eq3}\n$$\n考虑下列两种情形:\n(i) 若 $m \\geqslant \\frac{k^2}{3}$, 则结合已知条件 $m \\leqslant 2 k-1$, 解得\n$$\n3-\\sqrt{6} \\leqslant k \\leqslant 3+\\sqrt{6},\n$$\n即 $1 \\leqslant k \\leqslant 5$.\n(ii) 若 $m<\\frac{k^2}{3}$, 则由 式\\ref{eq3} 及 \\ref{eq2} 得\n$$\n\\frac{3 m(m-1)}{k(k-1)} \\leqslant n \\leqslant \\frac{(k-3) m}{k^2-3 m}, \\label{eq4}\n$$\n去分母整理得\n$$\n9 m^2-3\\left(k^2+3\\right) m+k\\left(k^2-k+3\\right) \\geqslant 0,\n$$\n即\n$$\n(3 m-k)\\left[3 m-\\left(k^2-k+3\\right)\\right] \\geqslant 0,\n$$\n由于 $k^2-k+3>k$, 所以 $m \\leqslant \\frac{k}{3}$ (舍去, 因为 $m \\geqslant k$ ) 或者\n$$\nm \\geqslant \\frac{1}{3}\\left(k^2-k+3\\right),\n$$\n由已知 $m \\leqslant 2 k-1$, 故\n$$\n2 k-1 \\geqslant m \\geqslant \\frac{1}{3}\\left(k^2-k+3\\right), \\label{eq5}\n$$\n由此解出 $1 \\leqslant k \\leqslant 6$.\n由 (i), (ii), 我们得到 $1 \\leqslant k \\leqslant 6$, 故所求 $k$ 的最大值不大于 6 , 并且由不等式 \\ref{eq5} 知 $k=6$ 当且仅当 $m=11$, 再由 式\\ref{eq4} 知 $k=6$ 且 $m=11$ 当且仅当 $n=11$.\n其次, 当 $k=6, m=11, n=11$ 时,存在满足条件(1),(2), (3) 的实例如下:令\n$$\nA_t=\\{t, t+1, t+2, t+6, t+8, t+9\\}, t=1,2, \\cdots, 11 .\n$$\n并且约定当 $j \\equiv i(\\bmod 11)$ 时, $j$ 与 $i$ 表示同一个元素.\n于是对任意 $i, j(1 \\leqslant i< j \\leqslant 11$ ), 含 $i$ 的集合有且只有以下 6 个:\n$$\n\\begin{aligned}\n& A_i=\\{i, i+1, i+2, i+6, i+8, i+9\\} ; \\\\\n& A_{i+2}=\\{i, i+2, i+3, i+4, i+8, i+10\\} ; \\\\\n& A_{i+3}=\\{i, i+1, i+3, i+4, i+5, i+9\\} ; \\\\\n& A_{i+5}=\\{i, i+2, i+3, i+5, i+6, i+7\\} ; \\\\\n& A_{i+9}=\\{i, i+4, i+6, i+7, i+9, i+10\\} ; \\\\\n& A_{i+10}=\\{i, i+1, i+5, i+7, i+8, i+10\\} .\n\\end{aligned}\n$$\n上述 6 个集合中除了 $i$ 出现 6 次以外, 其他 $i+1$, $i+2, i+3, i+4, i+5, i+6, i+7, i+8, i+ 9, i+10$ 都恰出现 3 次.\n故对任意 $i, j \\in\\{1,2,3$, $\\cdots, 11\\}, i \\neq j$, 有且只有 3 个集合包含 $i$ 与 $j$.\n假设将周长为 11 的圆周分为 11 等分, 将 11 个等分点按顺时针方向标记为 $1,2, \\cdots, 11$. 假设这个圆周上按顺时针方向从点 $i$ 到点 $j$ 的距离为 $d_{i j}$, 于是, 对于圆周上的点集 $A_i$ 可得下表,如图(<FilePath:./images/volume11/figures/fig-c15i1.png>) \n\\begin{tabular}{|c|c|c|c|c|c|c|}\n\\hline$j$ & $i$ & $i+1$ & $i+2$ & $i+6$ & $i+8$ & $i+9$ \\\\\n\\hline$i$ & & & & & \\\\\n\\hline$i j$ & 11 & 1 & 2 & 6 & 8 & 9 \\\\\n\\hline$i+1$ & 10 & 11 & 1 & 5 & 7 & 8 \\\\\n\\hline$i+2$ & 9 & 10 & 11 & 4 & 6 & 7 \\\\\n\\hline$i+6$ & 5 & 6 & 7 & 11 & 2 & 3 \\\\\n\\hline$i+8$ & 3 & 4 & 5 & 9 & 11 & 1 \\\\\n\\hline$i+9$ & 2 & 3 & 4 & 8 & 10 & 11 \\\\\n\\hline\n\\end{tabular}\n由这个表可知在 $A_i=\\{i, i+1, i+2, i+6, i+8, i+9\\}$ 中, 按顺时针方向距离为 $1,2, \\cdots, 10$ 的点各有 3 对, 因为在圆周上将点集 $A_i$ 按顺时针方向旋转长为 $j-i$ 的距离后便得到点集 $A_j$, 故旋转后, $A_i$ 中的且只有 3 个点到达的位置正是 $A_j$ 中的三个点, 从而 $\\left|A_i \\cap A_j\\right|=3(1 \\leqslant i<j \\leqslant 11$ ) (直接验证这点也可).\n综上可得 $k$ 的最大值为 6 , 这时 $n=11$.",
    "remark": "注:本题可以等价地写成下列问题: 某中学在三下乡的活动中派出一支文艺小分队到农村进行一次慰问演出 (小分队中每人都是演员), 满足\n(1)每个节目都恰有相同的人数参加演出, 且每个节目演出时, 台上参加演出的演员人数总是多于台下没有参加演出的演员人数;\n(2)对任意两名演员, 至少同台参加了三个不同节目的演出;\n(3)每两个不同节目, 至多有三名相同的演员参加了演出.\n求参加每个节目演出的演员人数取最大值时, 一共演出了多少个节目.",
    "figures": [
        "./images/volume11/figures/fig-c15i1.png"
    ]
}