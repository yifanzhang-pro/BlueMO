{
    "source_file": "./raw_volume-zh/volume11/chapter15.tex",
    "problem_type": "proof",
    "problem": "例7. $M O$ 太空城由 99 个空间站组成, 任意两个空间站之间有管形通道相连, 规定其中 99 条通道为双向通行的主干道, 其余通道严格单向通行.\n如果某四个空间站可以通过它们之间的通道从其中任一站到达另外任一站, 则称这四个站的集合为一个互通四站组.\n试为 $M O$ 太空城设计一个方案, 使得互通四站组的数目最大 (请具体算出该最大数,并证明你的结论).",
    "solution": "解:把问题一般化,下面讨论 $n$ 个空间站和 $n$ 条双向主干线的一般情形, 其中 $n$ 为大于 3 的奇数, 并记 $m=\\frac{1}{2}(n-3)$, 本题中 $n=99, m=48$.\n(1)若在四个空间站中有一个空间站与另外三个站的通道都是从该站严格单向发出, 则这四个站的集合不是互通四站组, 把这样的非互通四站组归人 $S$ 类, 其余的非互通四站组归人 $T$ 类, 于是四通互站组的总数为\n$$\nN_n=\\mathrm{C}_n^4-|S|-|T| .\n$$\n用 $1,2, \\cdots, n$ 给 $n$ 个空间站编号, 设从第 $i$ 号空间站发出的严格单向通道数为 $x_i$, 则 $S$ 类非互通四站组的个数为 $|S|=\\sum_{i=1}^n \\mathrm{C}_{x_i}^3$, 并且\n$$\nx_1+x_2+\\cdots+x_n=\\mathrm{C}_n^2-n=\\frac{1}{2} n(n-3)=n m .\n$$\n要使 $N_n$ 最大, 必须 $|S|$ 和 $|T|$ 最小.\n首先, 我们证明 $|S| \\geqslant n \\mathrm{C}_m^3$. 事实上, 当 $|S|$ 取最小值时, 必对任意 $1 \\leqslant i<j \\leqslant n,\\left|x_i-x_j\\right| \\leqslant 1$. 这是因为若存在 $1 \\leqslant i, j \\leqslant n$, 使 $x_j-x_i \\geqslant 2$, 那么令 $x_i{ }^{\\prime}=x_i+1, x_j{ }^{\\prime}=x_j-1, x_k{ }^{\\prime}=x_k(k \\neq i, j)$, 于是 $\\sum_{i=1}^n x_i{ }^{\\prime}=\\sum_{i=1}^n x_i$, 设 $\\left|S^{\\prime}\\right|=\\sum_{i=1}^n \\mathrm{C}_{x_i{ }^{\\prime}}^3$, 则 $|S|-\\left|S^{\\prime}\\right|=\\mathrm{C}_{x_i}^3+\\mathrm{C}_{x_j}^3-\\mathrm{C}_{x_i}^3-\\mathrm{C}_{x_j{ }^{\\prime}}^3=\\mathrm{C}_{x_i}^3+\\mathrm{C}_{x_j}^3- \\mathrm{C}_{x_i+1}^3-\\mathrm{C}_{x_j-1}^3=\\mathrm{C}_{x_j-1}^2-\\mathrm{C}_{x_i}^2>0$ (因为 $\\left(x_j-1\\right)-x_i \\geqslant 1$ ), 这与 $|S|$ 最小矛盾.\n又 $x_1+x_2+\\cdots+x_n=n m$, 所以 $x_1=x_2=\\cdots=x_n=m$ 时, $S$ 取最小值.\n故 $|S| \\geqslant n \\mathrm{C}_m^3$, 当且仅当 $x_1=x_2=\\cdots=x_n=m$ 时, 等号成立,所以\n$$\nN_n=\\mathrm{C}_n^4-|S|-|T| \\leqslant \\mathrm{C}_n^4-n \\mathrm{C}_m^3-0=\\frac{1}{48} n(n-3)\\left(n^2+6 n-31\\right) .\n$$\n(2)下面的设计方案表明 $N_n=\\mathrm{C}_n^4-n \\mathrm{C}_m^3$ 是可以成立的.\n首先将编号为 $1,2, \\cdots, n$ 的空间站依顺时针方向排在一个圆周上的 $n$ 个点 $A_1, A_2, \\cdots, A_n$ 处, 圆周上相邻两空间站的通道为双向通行主干道, 这样一共设置了 $n$ 条双向通行的主干道:\n$$\nA_1 A_2, A_2 A_3, \\cdots, A_{n-1} A_n, A_n A_1 .\n$$\n对任意 $i, j \\in\\{1,2,3, \\cdots, n\\}, i \\neq j$, 沿顺时针方向若从 $A_i$ 到 $A_j$ 的弧经过奇数个空间站, 那么规定 $A_i$ 与 $A_j$ 之间的通道是从 $A_i$ 到 $A_j$ 的严格单向通行道: $A_i \\rightarrow A_j$, 因为 $n$ 为奇数, 从 $A_i$ 到 $A_j$ 的顺时针方向的弧与从 $A_j$ 到 $A_i$ 的顺时针方向的弧当中恰有一个经过奇数空间站, 故上述规定不会导致矛盾.\n按此规定, 从每个 $A_i$ 出发的严格单向通行道的数目都为 $m=\\frac{1}{2}(n-3)$, 所以 $|S|=n \\mathrm{C}_m^3$. 下面证明: 此方案中必有 $|T|=0$.\n如果四站组中有两个空间站之间的通道是双向主干道, 那么易知这个四站组是互通四站组.\n因此, 如果四站组 $A 、 B 、 C 、 D$ 不是互通的, 那么它们中任何两站的通道都是严格单向通行道.\n设 $A$ 与 $B, B$ 与 $C, C$ 与 $D, D$ 与 $A$ 之间的空间站的个数分别为 $a, b, c, d$,于是 $a+b+c+d=n-4$ 为奇数, 从而 $a, b, c, d$ 中奇数个数是 1 和 3 .\n(i) 若 $a$ 为奇数, $b, c, d$ 为偶数, 则 $A \\rightarrow B \\rightarrow D \\rightarrow C \\rightarrow A$. 即 $A 、 B 、 C 、 D$ 为互通四站组, 如图(<FilePath:./images/volume11/figures/fig-c15i4.png>) .\n(ii) 若 $a$ 为偶数, $b, c, d$ 为奇数, 则从 $B$ 到 $A 、 C 、 D$ 的通道都是从 $B$ 出发的严格单向通道, 这种非互通四站组属于 $S$ 类, 如图(<FilePath:./images/volume11/figures/fig-c15i5.png>) .\n由以上讨论知此方案中 $|T|=0$, 从而 $|S|=\\mathrm{C}_n^4-n \\mathrm{C}_m^3$.\n综上可得, 互通四站组个数的最大值为 $\\mathrm{C}_n^4-n \\mathrm{C}_m^3=\\frac{1}{48} n(n-3)\\left(n^2+6 n-31\\right)$, 特别 $n=99$ 时, 本题所求互通四站组个数的最大值为 $\\mathrm{C}_{99}^4-99 \\mathrm{C}_{48}^3=2052072$.",
    "remark": "",
    "figures": [
        "./images/volume11/figures/fig-c15i4.png",
        "./images/volume11/figures/fig-c15i5.png"
    ]
}