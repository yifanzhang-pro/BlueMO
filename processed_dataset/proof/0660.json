{
    "source_file": "./raw_volume-zh/volume14/chapter17.tex",
    "problem_type": "proof",
    "problem": "例7. 给定不小于 3 的正整数 $n$. 设圆周上依次写了 $n$ 个数 $a_1, a_2, \\cdots$, $a_n$ (这里约定 $a_n$ 与 $a_1$ 也相邻). 现对这 $n$ 个数做操作.\n每次操作是: 任选两个相邻的数,使它们加上同一个正整数, 而其他数不变.\n求所有 $n$, 使得当 $a_1$, $a_2, \\cdots, a_n$ 是 $1^2, 2^2, \\cdots, n^2$ 的任一排列时, 都能经过不多于 $n$ 次操作, 使圆周上所有数全相等.",
    "solution": "解:圆内接 $n$ 边形 $A_1 A_2 \\cdots A_n$ 的顶点 $A_i$ 对应数 $a_i(i=1,2, \\cdots, n)$, 将题目所述的对相邻数字的操作视为对 $n$ 边形相邻顶点的操作 (约定 $A_{i+n}= \\left.A_i, a_{i+n}=a_i\\right)$.\n假定经过若干步操作后, 所有数都变为 $S$.\n当 $n$ 为偶数时, 记 $A_1, A_3, \\cdots, A_{n-1}$ 位置的数之和为 $P, A_2, A_4, \\cdots, A_n$ 位置的数之和为 $Q$, 考虑到任何一次操作对 $P$ 与 $Q$ 的改变量相同, 故不改变 $P-Q$ 的值, 而最终时刻 $P-Q$ 等于 0 , 所以初始时刻 $P-Q=a_1-a_2+ a_3-\\cdots+a_{n-1}-a_n=0$, 但若取 $\\left(a_1, a_2, \\cdots, a_n\\right)=\\left(1^2, 2^2, \\cdots, n^2\\right)$, 则 $a_1- a_2+a_3-\\cdots+a_{n-1}-a_n<0$, 矛盾! 故 $n$ 只能是奇数.\n另一方面, 当 $n$ 为奇数时, 我们证明更强的结论: 无论 $a_1, a_2, \\cdots, a_n$ 取怎样的一组正整数,都能经过不多于 $n$ 次操作, 使 $n$ 个顶点的数全相等.\n若对 $A_i$ 与 $A_{i+1}, A_{i+2}$ 与 $A_{i+3}, \\cdots, A_{i+n-1}$ 与 $A_{i+n}\\left(=A_i\\right)$ 各做一次加 1 的操作, $A_i$ 对应的数就增大 2 , 其余数各增大 1 . 称这样的 $\\frac{n+1}{2}$ 次操作是对 $A_i$ 的一组操作.\n不妨设 $a_j=\\max \\left\\{a_1, a_2, \\cdots, a_n\\right\\}$. 现对 $A_i$ 做 $a_j-a_i$ 组操作, $i=1,2, \\cdots, n$, 共进行了 $\\sum_{k=1}^n\\left(a_j-a_k\\right)$ 组操作.\n操作之后 $A_i$ 对应的数变成\n$$\n\\begin{aligned}\na_i+2\\left(a_j-a_i\\right)+\\sum_{\\substack{k=1 \\\\\nk \\neq i}}^n\\left(a_j-a_k\\right) & =a_i+\\left(a_j-a_i\\right)+\\sum_{k=1}^n\\left(a_j-a_k\\right) \\\\\n& =a_j+\\sum_{k=1}^n\\left(a_j-a_k\\right),\n\\end{aligned}\n$$\n显然 $n$ 个顶点的数全相等.\n将这 $\\sum_{k=1}^n\\left(a_j-a_k\\right)$ 组操作看作 $\\frac{n+1}{2} \\sum_{k=1}^n\\left(a_j-a_k\\right)$ 次 \"对相邻两数加 1 \" 的操作, 再将其中对 $A_i, A_{i+1}$ 的所有 $q_i$ 次操作合并成一次 \"对 $A_i, A_{i+1}$ 各加上 $q_i$ \" 的操作, 这样总共只有不超过 $n$ 次操作, 将这些操作作用于 $A_1, A_2, \\cdots$, $A_n$ 可使 $n$ 个顶点的数变为相同.\n所以, $n$ 为奇数时, 这个更强的结论成立.\n综上所述,满足条件的一切 $n$ 是全体大于等于 3 的奇数.",
    "remark": "注:本题中对 $n$ 为奇数与 $n$ 为偶数的情形均使用了调整策略.\n当 $n$ 为偶数时, 先仔细分析条件, 弄清可变的是 $n$ 个数 $a_1, a_2, \\cdots, a_n$ 的初始排列顺序, 不变的是每次操作前后 $P-Q$ 的值, 这就掌握了操作变换过程的内在不变规律,通过适当选取初始排列顺序即可举出反例.\n当 $n$ 为奇数时, 先忽略\"不多于 $n$ 次操作\" 的限制, 并且考虑一个自然且基本的问题: 能否做到只调整一个给定位置上的数字, 将其变成最小的单位-1? 题中所述的\"一组操作\"恰可达到这样的效果, 从而可利用这种操作方式逐步将所有数调整成一样.\n最后通过对调整过程的重组, 确保\"不多于 $n$ 次操作\"的限制条件也可以满足.",
    "figures": []
}