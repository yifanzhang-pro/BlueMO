{
    "source_file": "./raw_volume-zh/volume6/chapter2-6.tex",
    "problem_type": "proof",
    "problem": "例1. 函数 $f: \\mathbf{N}^* \\rightarrow \\mathbf{N}$ 定义如下 $f(1)=0$, 且对任意 $n \\in \\mathbf{N}^*, n \\geqslant 2$, 都有\n$$\nf(n)=\\max \\left\\{f(j)+f(n-j)+j \\mid j=1,2, \\cdots,\\left[\\frac{n}{2}\\right]\\right\\} . \\label{eq1}\n$$\n求出 (并予以证明) $f(2004)$ 的值.",
    "solution": "解:试算 $n$ 较小时 $f(n)$ 的值, 分别有 $f(2)=1, f(3)=2, f(4)=4$, $f(5)=5, \\cdots$. 在计算这些值的过程中, 可发现当 $1 \\leqslant j \\leqslant\\left[\\frac{n}{2}\\right]$ 时, $f(j)+ f(n-j)+j$ 的最大值在 $j=\\left[\\frac{n}{2}\\right]$ 时取到, 因此, 猜想\n$$\nf(2 n)=2 f(n)+n, f(2 n+1)=f(n)+f(n+1)+n . \n$$\n下面用数学归纳法来证明式\\ref{eq1}成立.\n当 $n=1$ 时,由上面的讨论知式\\ref{eq1}成立.\n现设式\\ref{eq1}对 $1,2, \\cdots, n-1$ 都成立, 考虑 $n$ 的情形.\n先求 $f(2 n)$ 的值.\n$$\n\\begin{aligned}\nf(2 n) & =\\max \\{f(j)+f(n-j)+j \\mid 1 \\leqslant j \\leqslant n\\} \\geqslant f(n)+f(2 n-n)+n \\\\\n& =2 f(n)+n .\n\\end{aligned}\n$$\n因此,只需证明: $f(2 n) \\leqslant 2 f(n)+n$.\n对 $1 \\leqslant j \\leqslant n$ 中 $j$ 的奇偶性分别讨论.\n当 $j=2 k, 1 \\leqslant k \\leqslant\\left[\\frac{n}{2}\\right]$ 时, 由归纳假设有\n$$\n\\begin{aligned}\nf(j)+f(2 n-j)+j & =f(2 k)+f(2(n-k))+2 k \\\\\n& =(2 f(k)+k)+(2 f(n-k)+n-k)+2 k \\\\\n& =2(f(k)+f(n-k)+k)+n \\leqslant 2 f(n)+n .\n\\end{aligned}\n$$\n最后一个不等式由 $f(n)$ 的定义得到.\n当 $j=2 k-1,1 \\leqslant k \\leqslant\\left[\\frac{n+1}{2}\\right]$ 时, 由归纳假设知\n$$\n\\begin{aligned}\n& f(j)+f(2 n-j)+j \\\\\n= & f(2 k-1)+f(2(n-k)+1)+2 k-1 \\\\\n= & (f(k)+f(k-1)+k-1)+(f(n-k)+f(n-k+1)+n-k)+2 k-1 \\\\\n= & (f(k-1)+f(n-(k-1))+k-1)+(f(k)+f(n-k)+k)+n-1 \\\\\n\\leqslant & f(n)+f(n)+n=2 f(n)+n .\n\\end{aligned}\n$$\n这里认定 $f(0)=0$, 又当 $n$ 为偶数时, $\\left[\\frac{n+1}{2}\\right]=\\left[\\frac{n}{2}\\right]$; 当 $n$ 为奇数时, 设 $n= 2 m+1$, 则 $k=\\left[\\frac{n+1}{2}\\right]$ 时, $f(k)+f(n-k)+k=f(m+1)+f(m)+m+ 1 \\leqslant f(n)+1$, 所以上述不等式的推导是正确的.\n从而 $f(2 n) \\leqslant 2 f(n)+n$.\n再求 $f(2 n+1)$ 的值时, 同上类似讨论, 可知只需证明:\n$$\nf(2 n+1) \\leqslant f(n)+f(n+1)+n .\n$$\n仍对 $1 \\leqslant j \\leqslant n$ 中 $j$ 的奇偶性分别予以分析.\n当 $j=2 k, 1 \\leqslant j \\leqslant\\left[\\frac{n}{2}\\right]$ 时, 由归纳假设有\n$$\n\\begin{aligned}\n& f(j)+f(2 n+1-j)+j \\\\\n= & f(2 k)+f(2 n+1-2 k)+2 k \\\\\n= & (2 f(k)+k)+(f(n-k)+f(n-k+1)+n-k)+2 k \\\\\n= & (f(k)+f(n-k)+k)+(f(k)+f(n+1-k)+k)+n \\\\\n\\leqslant & f(n)+f(n+1)+n .\n\\end{aligned}\n$$\n当 $j=2 k-1,1 \\leqslant j \\leqslant\\left[\\frac{n+1}{2}\\right]$ 时, 有\n$$\n\\begin{aligned}\n& f(j)+f(2 n+1-j)+j \\\\\n= & f(2 k-1)+f(2 n-2 k+2)+2 k-1 \\\\\n= & (f(k-1)+f(k)+k-1)+(2 f(n-k-1)+n-k+1)+2 k-1 \\\\\n= & (f(k-1)+f(n-(k-1))+k-1)+(f(k)+f(n+1-k)+k)+n \\\\\n\\leqslant & f(n)+f(n+1)+n .\n\\end{aligned}\n$$\n从而 $f(2 n+1) \\leqslant f(n)+f(n+1)+n$.\n综上可知, 对任意 $n \\in \\mathbf{N}^*$, 式\\ref{eq1} 都成立.\n现在利用式\\ref{eq1}依次递推计算得 $f(2)=1, f(3)=2, f(4)=4, f(7)=9$, $f(8)=12, f(15)=28, f(16)=32, f(31)=75, f(32)=80, f(62)= 181, f(63)=186, f(125)=429, f(126)=435, f(250)=983, f(251)= 989, f(501)=2222, f(1002)=4945, f(2004)=10892$.\n所求的值 $f(2004)=10892$.\n说明猜测的时候可以粗䊁一些,但推导证明时一定要认真仔细, 否则很容易得出错误的结论, 难以形成科学的态度和习惯.",
    "remark": "",
    "figures": []
}