{
    "source_file": "./raw_volume-zh/volume14/exercise13.tex",
    "problem_type": "proof",
    "problem": "问题8. 桌上放着 4 堆火柴,两人依次轮流做取火柴游戏: 游戏者每次任意取走其中一堆, 并把余下两堆中的任意一堆分成非空的两堆.\n谁无法这样做, 就算输了.\n假如一开始 4 堆火柴中有 3 堆是 2 根, 另一堆是 $n$ 根, 求正整数 $n$ 的所有可能值,使先取火柴的一方有必胜策略.",
    "solution": "首先可验证 $n=1,2,5,6, \\cdots$ 时不满足题意, $n=3,4,7,8, \\cdots$ 时满足题意, 故猜想当且仅当 $n \\equiv 0,3(\\bmod 4)$ 时, 先取方有必胜策略.\n用四元正整数组表示 4 堆火柴的根数 (若仅是顺序不同, 则认为是同一数组), 并将游戏的胜状态和负状态集合分别记为 $W$ 和 $L$.\n我们先证引理: 当正整数组被写成 $P=\\left(2^{n_1} a_1, 2^{n_2} a_2, 2^{n_3} a_3, 2^{n_4} a_4\\right)$\n的形式(其中 $n_i \\in \\mathbf{N}, a_i$ 为奇数, $i=1,2,3,4$ ) 时, 若存在两两不同的 $i$, $j, k$, 使 $n_i=n_j<n_k$ (情形 1 ), 则 $P \\in W$; 若 $n_1=n_2=n_3=n_4$ (情形 2 ), 则 $P \\in L$.\n事实上, 在情形 1 下, 可取走非 $i, j, k$ 的那堆, 并将第 $k$ 堆拆成根数分别为 $2^{n_i}, 2^{n_i}\\left(2^{n_k-n_i} a_k-1\\right)$ 的两堆, 此时 $a_i, a_j, 1,2^{n_k-n_i} a_k-1$ 均为奇数,故产生的数组属于情形 2 ; 在情形 2 下, 设 $n_1=n_2=n_3=n_4=n$, 不妨设取走第 1 堆, 并将第 2 堆拆成根数为 $2^{m_1} b_1, 2^{m_2} b_2$ 的两堆 ( $m_1, m_2 \\in \\mathbf{N}, b_1, b_2$ 为奇数), 考虑到 $a_2$ 是奇数且 $2^{m_1} b_1+2^{m_2} b_2=2^n a_2$, 故要么 $m_1=m_2<n$, 要么 $m_1=n< m_2$ 或 $m_2=n<m_1$, 无论如何总变为情形 1 .\n由于情形 1 下总能进行操作且游戏必在有限步内结束, 递归可知引理成立.\n下面再证明: 对任意 $k, l \\in \\mathbf{N}^*$, 若 $P=(2,2,4 k, l),(2,2,4 k-1$, l) (情形 3 ), 则 $P \\in W$; 若 $P=(2,2,2,4 k-2),(2,2,2,4 k-3$ ) (情形 4), 则 $P \\in L$.\n事实上, 在情形 3 下, 可取走第 4 堆, 并将第 3 堆拆成根数分别为 $2,4 k-$ 2 或 $2,4 k-3$ 的两堆, 化为情形 4 . 而在情形 4 下, 我们证明任何操作不是得到一个胜状态就是回到情形 3 : 若是将前三堆中的某堆拆开, 则产生数组 $(1,1$, $2, m)$, 据引理知 $(1,1,2, m) \\in W$. 若在前三堆中取走某一堆, 而拆开第 4 堆, 那么产生数组 $(2,2, c, d)$. 此时若 $c, d$ 中有某个模 4 余 3 , 则回到情形 3 ; 若 $c$ 和 $d$ 模 4 均余 1 或 2 , 由于 $c+d \\equiv 1,2(\\bmod 4)$, 只可能是 $c, d \\equiv 1(\\bmod 4)$ 的情况, 由引理知 $(2,2, c, d) \\in W$.\n根据递归可知结论成立.\n从该结论易看出, 当且仅当 $n \\equiv 0,3(\\bmod 4)$ 时, 先取方有必胜策略.",
    "remark": "",
    "figures": []
}